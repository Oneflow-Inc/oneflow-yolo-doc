
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.1.11">
    
    
      
        <title>3.4 æ¨¡å‹èåˆ (Model Ensembling) - oneflow-yolo-doc</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3754935a.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="oneflow-yolo-doc" class="md-header__button md-logo" aria-label="oneflow-yolo-doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            oneflow-yolo-doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3.4 æ¨¡å‹èåˆ (Model Ensembling)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/Oneflow-Inc/oneflow-yolo-doc/" title="å‰å¾€ GitHub ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    OneYOLO-Doc
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../index.html" class="md-tabs__link">
      é¦–é¡µğŸ 
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../00_chapter/overview.html" class="md-tabs__link md-tabs__link--active">
        YOLOv5æ•™ç¨‹ğŸ“š
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../source_code_interpretation/train_py.html" class="md-tabs__link">
        æºç è§£è¯»
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../thesis_interpretation/00_yolo_history.html" class="md-tabs__link">
        è®ºæ–‡è§£è¯»
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="oneflow-yolo-doc" class="md-nav__button md-logo" aria-label="oneflow-yolo-doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    oneflow-yolo-doc
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/Oneflow-Inc/oneflow-yolo-doc/" title="å‰å¾€ GitHub ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    OneYOLO-Doc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        é¦–é¡µğŸ 
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      <label class="md-nav__link" for="__nav_2">
        YOLOv5æ•™ç¨‹ğŸ“š
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="YOLOv5æ•™ç¨‹ğŸ“š" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          YOLOv5æ•™ç¨‹ğŸ“š
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      <label class="md-nav__link" for="__nav_2_1">
        å¼•è¨€
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="å¼•è¨€" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          å¼•è¨€
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../00_chapter/overview.html" class="md-nav__link">
        one-yolov5 ç‰¹ç‚¹è§£æ
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../00_chapter/optim_speed_version1.html" class="md-nav__link">
        æ¶ˆè´¹çº§æ˜¾å¡çš„æ˜¥å¤©ï¼ŒGTX 3090 YOLOv5så•å¡å®Œæ•´è®­ç»ƒCOCOæ•°æ®é›†ç¼©çŸ­11.35ä¸ªå°æ—¶
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      <label class="md-nav__link" for="__nav_2_2">
        ç¬¬ä¸€ç«  ç½‘ç»œç»“æ„
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ç¬¬ä¸€ç«  ç½‘ç»œç»“æ„" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          ç¬¬ä¸€ç«  ç½‘ç»œç»“æ„
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../01_chapter/yolov5_network_structure_analysis.html" class="md-nav__link">
        1.1. YOLOv5 ç½‘ç»œç»“æ„è§£æ
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      <label class="md-nav__link" for="__nav_2_3">
        ç¬¬äºŒç«  è®­ç»ƒæ¨¡å‹çš„æ•°æ®é›†
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ç¬¬äºŒç«  è®­ç»ƒæ¨¡å‹çš„æ•°æ®é›†" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          ç¬¬äºŒç«  è®­ç»ƒæ¨¡å‹çš„æ•°æ®é›†
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../02_chapter/how_to_prepare_yolov5_training_data.html" class="md-nav__link">
        2.1. å¦‚ä½•å‡†å¤‡YOLOv5æ¨¡å‹è®­ç»ƒæ•°æ®
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" checked>
      
      <label class="md-nav__link" for="__nav_2_4">
        ç¬¬ä¸‰ç«  æ¨¡å‹è®­ç»ƒ
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ç¬¬ä¸‰ç«  æ¨¡å‹è®­ç»ƒ" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          ç¬¬ä¸‰ç«  æ¨¡å‹è®­ç»ƒ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="quick_start.html" class="md-nav__link">
        3.1 å¿«é€Ÿå¼€å§‹
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="loading_model_from_oneflowhub.html" class="md-nav__link">
        3.2 ä»OneFlow Hub åŠ è½½YOLOv5
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="TTA.html" class="md-nav__link">
        3.3 æµ‹è¯•æ—¶å¢å¼º (TTA)
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          3.4 æ¨¡å‹èåˆ (Model Ensembling)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="model_ensembling.html" class="md-nav__link md-nav__link--active">
        3.4 æ¨¡å‹èåˆ (Model Ensembling)
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    å‰è¨€
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-ensembling" class="md-nav__link">
    æ¨¡å‹èåˆ (Model Ensembling)
  </a>
  
    <nav class="md-nav" aria-label="æ¨¡å‹èåˆ (Model Ensembling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ğŸ“Œå¼€å§‹ä¹‹å‰
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ğŸ“Œæ™®é€šæµ‹è¯•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ğŸ“Œ èåˆæµ‹è¯•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    ğŸ“Œèåˆæ¨ç†
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    å‚è€ƒæ–‡ç« 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" type="checkbox" id="__nav_2_5" >
      
      <label class="md-nav__link" for="__nav_2_5">
        ç¬¬å››ç«  æ•°æ®ç»„ç»‡ä¸å¤„ç†è§£è¯»
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ç¬¬å››ç«  æ•°æ®ç»„ç»‡ä¸å¤„ç†è§£è¯»" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          ç¬¬å››ç«  æ•°æ®ç»„ç»‡ä¸å¤„ç†è§£è¯»
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../04_chapter/mosaic.html" class="md-nav__link">
        4.1 mosaic è§£è¯»
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      <label class="md-nav__link" for="__nav_2_6">
        ç¬¬äº”ç«  YOLOv5ä¸­IoUæŸå¤±
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ç¬¬äº”ç«  YOLOv5ä¸­IoUæŸå¤±" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          ç¬¬äº”ç«  YOLOv5ä¸­IoUæŸå¤±
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05_chapter/rectangular_reasoning.html" class="md-nav__link">
        5.1 çŸ©å½¢æ¨ç†
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05_chapter/iou_in-depth_analysis.html" class="md-nav__link">
        5.2 IoUæ·±å…¥è§£æ
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05_chapter/map_analysis.html" class="md-nav__link">
        5.3 æ¨¡å‹ç²¾ç¡®åº¦è¯„ä¼°
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../05_chapter/Introduction_to_functions_used_in_metrics.html" class="md-nav__link">
        5.4 è®¡ç®—mAPç”¨åˆ°çš„numpyå‡½æ•°
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" type="checkbox" id="__nav_2_7" >
      
      <label class="md-nav__link" for="__nav_2_7">
        ç¬¬å…­ç«  æ¨¡å‹å¯¼å‡ºå’Œéƒ¨ç½²ä»‹ç»
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="ç¬¬å…­ç«  æ¨¡å‹å¯¼å‡ºå’Œéƒ¨ç½²ä»‹ç»" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_7">
          <span class="md-nav__icon md-icon"></span>
          ç¬¬å…­ç«  æ¨¡å‹å¯¼å‡ºå’Œéƒ¨ç½²ä»‹ç»
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../06_chapter/export_onnx_tflite_tensorrt.html" class="md-nav__link">
        6.1 æ¨¡å‹å¯¼å‡º
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        æºç è§£è¯»
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="æºç è§£è¯»" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          æºç è§£è¯»
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../source_code_interpretation/train_py.html" class="md-nav__link">
        train.py
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        utils
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="utils" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          utils
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../source_code_interpretation/utils/augmentations_py.html" class="md-nav__link">
        augmentations.py
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../source_code_interpretation/utils/dataloaders_py.html" class="md-nav__link">
        dataloaders.py
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../source_code_interpretation/utils/downloads_py.html" class="md-nav__link">
        downloads.py
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../source_code_interpretation/utils/general_py.html" class="md-nav__link">
        geneal.py
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../source_code_interpretation/utils/autoanchor_py.html" class="md-nav__link">
        autoanchor.py
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        è®ºæ–‡è§£è¯»
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="è®ºæ–‡è§£è¯»" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          è®ºæ–‡è§£è¯»
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../thesis_interpretation/00_yolo_history.html" class="md-nav__link">
        history
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../thesis_interpretation/01_yolo.html" class="md-nav__link">
        YOLOv1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../thesis_interpretation/02_yolo.html" class="md-nav__link">
        YOLOv2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../thesis_interpretation/03_yolo.html" class="md-nav__link">
        YOLOv3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../thesis_interpretation/04_yolo.html" class="md-nav__link">
        YOLOv4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../thesis_interpretation/06_yolo.html" class="md-nav__link">
        YOLOv6
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    å‰è¨€
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-ensembling" class="md-nav__link">
    æ¨¡å‹èåˆ (Model Ensembling)
  </a>
  
    <nav class="md-nav" aria-label="æ¨¡å‹èåˆ (Model Ensembling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    ğŸ“Œå¼€å§‹ä¹‹å‰
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    ğŸ“Œæ™®é€šæµ‹è¯•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    ğŸ“Œ èåˆæµ‹è¯•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    ğŸ“Œèåˆæ¨ç†
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    å‚è€ƒæ–‡ç« 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Oneflow-Inc/oneflow-yolo-doc/blob/master/docs/tutorials/03_chapter/model_ensembling.md" title="ç¼–è¾‘æ­¤é¡µ" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>3.4 æ¨¡å‹èåˆ (Model Ensembling)</h1>
                
                <h2 id="_1">å‰è¨€</h2>
<blockquote>
<p>ğŸ‰ä»£ç ä»“åº“åœ°å€ï¼š<a href="https://github.com/Oneflow-Inc/one-yolov5" target="blank">https://github.com/Oneflow-Inc/one-yolov5</a>
æ¬¢è¿star <a href="https://github.com/Oneflow-Inc/one-yolov5">one-yolov5é¡¹ç›®</a> è·å– <a href="https://github.com/Oneflow-Inc/one-yolov5/tags" target="blank" > æœ€æ–°çš„åŠ¨æ€ã€‚ </a>
<a href="https://github.com/Oneflow-Inc/one-yolov5/issues/new"  target="blank"  > å¦‚æœä½ æœ‰é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä»“åº“ç»™æˆ‘ä»¬æå‡ºå®è´µçš„æ„è§ã€‚ğŸŒŸğŸŒŸğŸŒŸ </a>
<a href="https://github.com/Oneflow-Inc/one-yolov5" target="blank" >
å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿æ¥ç»™æˆ‘Starå‘€ğŸ˜Š~  </a></p>
</blockquote>
<h2 id="model-ensembling">æ¨¡å‹èåˆ (Model Ensembling)</h2>
<p>From https://www.sciencedirect.com/topics/computer-science/ensemble-modeling:</p>
<blockquote>
<p>Ensemble modeling is a process where multiple diverse models are created to predict an outcome, either by using many different modeling algorithms or using different training data sets. The ensemble model then aggregates the prediction of each base model and results in once final prediction for the unseen data. The motivation for using ensemble models is to reduce the generalization error of the prediction. As long as the base models are diverse and independent, the prediction error of the model decreases when the ensemble approach is used. The approach seeks the wisdom of crowds in making a prediction. Even though the ensemble model has multiple base models within the model, it acts and performs as a single model.</p>
</blockquote>
<p>ğŸ“š è¿™ä¸ªæ•™ç¨‹ç”¨æ¥è§£é‡Šåœ¨YOLOv5æ¨¡å‹çš„æµ‹è¯•å’Œæ¨ç†ä¸­å¦‚ä½•ä½¿ç”¨æ¨¡å‹èåˆ (Model Ensembling)æé«˜mAPå’ŒRecall ğŸš€ </p>
<h3 id="_2">ğŸ“Œå¼€å§‹ä¹‹å‰</h3>
<p>å…‹éš†å·¥ç¨‹å¹¶åœ¨ <a href="https://www.python.org/">Python&gt;3.7.0</a> çš„ç¯å¢ƒä¸­å®‰è£… <a href="https://github.com/Oneflow-Inc/one-yolov5/blob/main/requirements.txt">requiresments.txt</a> , OneFlow è¯·é€‰æ‹© <a href="https://github.com/Oneflow-Inc/oneflow#install-with-pip-package">nightly ç‰ˆæœ¬æˆ–è€… &gt;0.9 ç‰ˆæœ¬</a> ã€‚<a href="https://github.com/Oneflow-Inc/one-yolov5/tree/main/models">æ¨¡å‹</a>å’Œ<a href="https://github.com/Oneflow-Inc/one-yolov5/tree/main/data">æ•°æ®</a>å¯ä»¥ä»æºç ä¸­è‡ªåŠ¨ä¸‹è½½ã€‚</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>git clone https://github.com/Oneflow-Inc/one-yolov5.git
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">cd</span> one-yolov5
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>pip install -r requirements.txt  <span class="c1"># install</span>
</code></pre></div>
<h3 id="_3">ğŸ“Œæ™®é€šæµ‹è¯•</h3>
<p>åœ¨å°è¯•<code>TTA</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å¸Œæœ›å»ºç«‹ä¸€ä¸ªåŸºå‡†èƒ½å¤Ÿè¿›è¡Œæ¯”è¾ƒã€‚è¯¥å‘½ä»¤åœ¨COCO val2017ä¸Šä»¥640åƒç´ çš„å›¾åƒå¤§å°æµ‹è¯•YOLOv5xã€‚ <code>yolov5x</code> æ˜¯å¯ç”¨çš„æœ€å¤§å¹¶ä¸”æœ€ç²¾ç¡®çš„æ¨¡å‹ã€‚å…¶å®ƒå¯ç”¨çš„æ¨¡å‹æ˜¯ <code>yolov5s</code>, <code>yolov5m</code>  å’Œ <code>yolov5l</code>ç­‰  æˆ–è€… è‡ªå·±ä»æ•°æ®é›†è®­ç»ƒå‡ºçš„æ¨¡å‹ <code>./weights/best</code>ã€‚æœ‰å…³æ‰€æœ‰å¯ç”¨æ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„ <a href="https://github.com/Oneflow-Inc/one-yolov5#%E9%A2%84%E8%AE%AD%E7%BB%83%E6%A3%80%E6%9F%A5%E7%82%B9">READEME table</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="err">$</span> <span class="n">python</span> <span class="n">val</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">weights</span> <span class="o">./</span><span class="n">yolov5x</span> <span class="o">--</span><span class="n">data</span> <span class="n">coco</span><span class="o">.</span><span class="n">yaml</span> <span class="o">--</span><span class="n">img</span> <span class="mi">640</span> <span class="o">--</span><span class="n">half</span>
</code></pre></div>
<p>ğŸ“¢ è¾“å‡º:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>val: <span class="nv">data</span><span class="o">=</span>data/coco.yaml, <span class="nv">weights</span><span class="o">=[</span><span class="s1">&#39;./yolov5x&#39;</span><span class="o">]</span>, <span class="nv">batch_size</span><span class="o">=</span><span class="m">32</span>, <span class="nv">imgsz</span><span class="o">=</span><span class="m">640</span>, <span class="nv">conf_thres</span><span class="o">=</span><span class="m">0</span>.001, <span class="nv">iou_thres</span><span class="o">=</span><span class="m">0</span>.6, <span class="nv">task</span><span class="o">=</span>val, <span class="nv">device</span><span class="o">=</span>, <span class="nv">workers</span><span class="o">=</span><span class="m">8</span>, <span class="nv">single_cls</span><span class="o">=</span>False, <span class="nv">augment</span><span class="o">=</span>False, <span class="nv">verbose</span><span class="o">=</span>False, <span class="nv">save_txt</span><span class="o">=</span>False, <span class="nv">save_hybrid</span><span class="o">=</span>False, <span class="nv">save_conf</span><span class="o">=</span>False, <span class="nv">save_json</span><span class="o">=</span>True, <span class="nv">project</span><span class="o">=</span>runs/val, <span class="nv">name</span><span class="o">=</span>exp, <span class="nv">exist_ok</span><span class="o">=</span>False, <span class="nv">half</span><span class="o">=</span>True, <span class="nv">dnn</span><span class="o">=</span>False
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>YOLOv5 ğŸš€ v1.0-8-g94ec5c4 Python-3.8.13 oneflow-0.8.1.dev20221018+cu112 
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>Fusing layers... 
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>Model summary: <span class="m">322</span> layers, <span class="m">86705005</span> parameters, <span class="m">571965</span> gradients
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>val: Scanning <span class="s1">&#39;/data/dataset/fengwen/coco/val2017.cache&#39;</span> images and labels... <span class="m">4952</span> found, <span class="m">48</span> missing, <span class="m">0</span> empty, <span class="m">0</span> corrupt: <span class="m">100</span>%<span class="p">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>               Class     Images     Labels          P          R     mAP@.5 mAP@.5:.95: <span class="m">100</span>%<span class="p">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="p">|</span> <span class="m">157</span>/157 <span class="o">[</span><span class="m">01</span>:55&lt;<span class="m">00</span>:00,  <span class="m">1</span>.36it/
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>                 all       <span class="m">5000</span>      <span class="m">36335</span>      <span class="m">0</span>.743      <span class="m">0</span>.627      <span class="m">0</span>.685      <span class="m">0</span>.503
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>Speed: <span class="m">0</span>.1ms pre-process, <span class="m">7</span>.5ms inference, <span class="m">2</span>.1ms NMS per image at shape <span class="o">(</span><span class="m">32</span>, <span class="m">3</span>, <span class="m">640</span>, <span class="m">640</span><span class="o">)</span>  <span class="c1"># &lt;--- baseline speed</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>Evaluating pycocotools mAP... saving runs/val/exp3/yolov5x_predictions.json...
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>...
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>Average Precision  <span class="o">(</span>AP<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span>   all <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.505 <span class="c1"># &lt;--- baseline mAP</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a> Average Precision  <span class="o">(</span>AP<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50      <span class="p">|</span> <span class="nv">area</span><span class="o">=</span>   all <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.689
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a> Average Precision  <span class="o">(</span>AP<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.75      <span class="p">|</span> <span class="nv">area</span><span class="o">=</span>   all <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.545
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a> Average Precision  <span class="o">(</span>AP<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span> small <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.339
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a> Average Precision  <span class="o">(</span>AP<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span>medium <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.557
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a> Average Precision  <span class="o">(</span>AP<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span> large <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.650
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a> Average Recall     <span class="o">(</span>AR<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span>   all <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span>  <span class="m">1</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.382
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a> Average Recall     <span class="o">(</span>AR<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span>   all <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span> <span class="m">10</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.628
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a> Average Recall     <span class="o">(</span>AR<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span>   all <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.677  <span class="c1"># &lt;--- baseline mAR</span>
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a> Average Recall     <span class="o">(</span>AR<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span> small <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.523
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a> Average Recall     <span class="o">(</span>AR<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span>medium <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.730
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a> Average Recall     <span class="o">(</span>AR<span class="o">)</span> @<span class="o">[</span> <span class="nv">IoU</span><span class="o">=</span><span class="m">0</span>.50:0.95 <span class="p">|</span> <span class="nv">area</span><span class="o">=</span> large <span class="p">|</span> <span class="nv">maxDets</span><span class="o">=</span><span class="m">100</span> <span class="o">]</span> <span class="o">=</span> <span class="m">0</span>.826
</code></pre></div></p>
<h3 id="_4">ğŸ“Œ èåˆæµ‹è¯•</h3>
<p>é€šè¿‡åœ¨ä»»ä½•ç°æœ‰çš„ val.pyæˆ–detect.pyå‘½ä»¤ä¸­çš„ <code>--weights</code> å‚æ•°åæ·»åŠ é¢å¤–çš„æ¨¡å‹ï¼Œå¯ä»¥åœ¨æµ‹è¯•å’Œæ¨ç†æ—¶å°†å¤šä¸ªé¢„è®­ç»ƒæ¨¡å‹èåˆåœ¨ä¸€èµ·ã€‚</p>
<p>ğŸ“¢ å°† <code>yolov5x</code>,<code>yolov5l6</code> ä¸¤ä¸ªæ¨¡å‹çš„èåˆæµ‹è¯•çš„æŒ‡ä»¤å¦‚ä¸‹ï¼š
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>python val.py --weights ./yolov5x ./yolov5l6  --data data/coco.yaml --img 640 --half
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>val: data=data/coco.yaml, weights=[&#39;./yolov5x&#39;, &#39;./yolov5l6&#39;], batch_size=32, imgsz=640, conf_thres=0.001, iou_thres=0.6, task=val, device=, workers=8, single_cls=False, augment=False, verbose=False, save_txt=False, save_hybrid=False, save_conf=False, save_json=True, project=runs/val, name=exp, exist_ok=False, half=True, dnn=False
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>YOLOv5 ğŸš€ v1.0-29-g8ed33f3 Python-3.8.13 oneflow-0.8.1.dev20221018+cu112 
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>Fusing layers... 
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>Model summary: 322 layers, 86705005 parameters, 571965 gradients
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>Fusing layers... 
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>Model summary: 346 layers, 76726332 parameters, 653820 gradients
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>Ensemble created with [&#39;./yolov5x&#39;, &#39;./yolov5l6&#39;]
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>val: Scanning &#39;/data/dataset/fengwen/coco/val2017.cache&#39; images and labels... 4952 found, 48 missing, 0 empty, 0 corrupt: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>               Class     Images     Labels          P          R     mAP@.5 mAP@.5:.95: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 157/157 [03:14&lt;00:00,  1.24s/i
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>                 all       5000      36335       0.73      0.644      0.693      0.513
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>Speed: 0.1ms pre-process, 23.7ms inference, 2.3ms NMS per image at shape (32, 3, 640, 640) # &lt;--- ensemble speed
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>Evaluating pycocotools mAP... saving runs/val/exp21/yolov5x_predictions.json...
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>...
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a> Average Precision  (AP) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.515  # &lt;--- ensemble mAP
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a> Average Precision  (AP) @[ IoU=0.50      | area=   all | maxDets=100 ] = 0.697
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a> Average Precision  (AP) @[ IoU=0.75      | area=   all | maxDets=100 ] = 0.556
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a> Average Precision  (AP) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.340
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a> Average Precision  (AP) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.567
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a> Average Precision  (AP) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.678
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a> Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=  1 ] = 0.389
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a> Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets= 10 ] = 0.637
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a> Average Recall     (AR) @[ IoU=0.50:0.95 | area=   all | maxDets=100 ] = 0.690 # &lt;--- ensemble mAR
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a> Average Recall     (AR) @[ IoU=0.50:0.95 | area= small | maxDets=100 ] = 0.517
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a> Average Recall     (AR) @[ IoU=0.50:0.95 | area=medium | maxDets=100 ] = 0.743
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a> Average Recall     (AR) @[ IoU=0.50:0.95 | area= large | maxDets=100 ] = 0.842
</code></pre></div>
<p>ğŸ“¢ å£°æ˜:ä¸Šè¿°ä¸¤æ¬¡æµ‹è¯•çš„mAPï¼ŒmARç»“æœå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>mAP</th>
<th>mAR</th>
</tr>
</thead>
<tbody>
<tr>
<td>baseline</td>
<td>0.505</td>
<td>0.677</td>
</tr>
<tr>
<td>ensemble</td>
<td>0.515</td>
<td>0.690</td>
</tr>
</tbody>
</table>
<h3 id="_5">ğŸ“Œèåˆæ¨ç†</h3>
<p>é™„åŠ é¢å¤–çš„æ¨¡å‹åœ¨ <code>--weights</code> é€‰é¡¹åè‡ªåŠ¨å¯ç”¨èåˆæ¨ç†ï¼š</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>python detect.py --weights ./yolov5x ./yolov5l6 --img 640 --source  data/images
</code></pre></div>
Output:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>detect: weights=[&#39;./yolov5x&#39;, &#39;./yolov5l6&#39;], source=data/images, data=data/coco128.yaml, imgsz=[640, 640], conf_thres=0.25, iou_thres=0.45, max_det=1000, device=, view_img=False, save_txt=False, save_conf=False, save_crop=False, nosave=False, classes=None, agnostic_nms=False, augment=False, visualize=False, update=False, project=runs/detect, name=exp, exist_ok=False, line_thickness=3, hide_labels=False, hide_conf=False, half=False, dnn=False
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>YOLOv5 ğŸš€ v1.0-31-g6b1387c Python-3.8.13 oneflow-0.8.1.dev20221018+cu112 
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>Fusing layers... 
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>Model summary: 322 layers, 86705005 parameters, 571965 gradients
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>Fusing layers... 
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>Model summary: 346 layers, 76726332 parameters, 653820 gradients
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>Ensemble created with [&#39;./yolov5x&#39;, &#39;./yolov5l6&#39;]
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>detect.py:159: DeprecationWarning: In future, it will be an error for &#39;np.bool_&#39; scalars to be interpreted as an index
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>  s += f&quot;{n} {names[int(c)]}{&#39;s&#39; * (n &gt; 1)}, &quot;  # add to string
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>image 1/2 /home/fengwen/one-yolov5/data/images/bus.jpg: 640x512 4 persons, 1 bus, 1 handbag, 1 tie, Done. (0.028s)
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>detect.py:159: DeprecationWarning: In future, it will be an error for &#39;np.bool_&#39; scalars to be interpreted as an index
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>  s += f&quot;{n} {names[int(c)]}{&#39;s&#39; * (n &gt; 1)}, &quot;  # add to string
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>image 2/2 /home/fengwen/one-yolov5/data/images/zidane.jpg: 384x640 3 persons, 2 ties, Done. (0.023s)
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>0.6ms pre-process, 25.6ms inference, 2.4ms NMS per image at shape (1, 3, 640, 640)
</code></pre></div></p>
<p><img alt="image" src="https://user-images.githubusercontent.com/109639975/202892132-f6d59244-1f5c-4175-927d-813ab2907ab1.png" /></p>
<h3 id="_6">å‚è€ƒæ–‡ç« </h3>
<ul>
<li>https://github.com/ultralytics/yolov5/issues/318</li>
</ul>
                
              
              
                


<script src="https://giscus.app/client.js"
        data-repo="Oneflow-Inc/oneflow-yolo-doc"
        data-repo-id="R_kgDOIGN7Xw"
        data-category="Announcements"
        data-category-id="DIC_kwDOIGN7X84CSq90"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="light"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="TTA.html" class="md-footer__link md-footer__link--prev" aria-label="ä¸Šä¸€é¡µ: 3.3 æµ‹è¯•æ—¶å¢å¼º (TTA)" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
              3.3 æµ‹è¯•æ—¶å¢å¼º (TTA)
            </div>
          </div>
        </a>
      
      
        
        <a href="../04_chapter/mosaic.html" class="md-footer__link md-footer__link--next" aria-label="ä¸‹ä¸€é¡µ: 4.1 mosaic è§£è¯»" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                ä¸‹ä¸€é¡µ
              </span>
              4.1 mosaic è§£è¯»
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "instant"], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.ddd52ceb.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>